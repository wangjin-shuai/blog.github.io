{"title":"通过包名判断Android应用是否在后台运行","slug":"hexo搭建第一天","date":"2019-07-04T13:10:43.000Z","updated":"2019-07-05T02:06:55.790Z","comments":true,"path":"api/articles/hexo搭建第一天.json","photos":[],"link":"","excerpt":"Android中判断应用是否在后台运行","covers":null,"content":"<h2 id=\"Android中判断应用是否在后台运行\"><a href=\"#Android中判断应用是否在后台运行\" class=\"headerlink\" title=\"Android中判断应用是否在后台运行\"></a><center>Android中判断应用是否在后台运行<center></center></center></h2><a id=\"more\"></a>\n\n<p>判断一个app是否在后台运行的，我是采用两个方法判断，当其中一个方法为true时，就代表程序正在后台运行中。</p>\n<pre><code>/**\n * 方法描述：根据包名判断某一应用是否正在运行\n * @param context     上下文\n * @param packageName 应用的包名\n * @return true 表示正在运行，false 表示没有运行\n */\nprivate static boolean isAppRunning(Context context, String packageName) {\n    ActivityManager am = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);\n    List&lt;ActivityManager.RunningTaskInfo&gt; list = am.getRunningTasks(100);\n    if (list.size() &lt;= 0) {\n        return false;\n    }\n    for (ActivityManager.RunningTaskInfo info : list) {\n        if (info.baseActivity.getPackageName().equals(packageName)) {\n            return true;\n        }\n    }\n    return false;\n}</code></pre><hr>\n<pre><code>/**\n * 判断一个Activity是否正在运行\n *\n * @param pkg  pkg为应用包名\n * @param cls  cls为类名eg\n * @param context\n * @return\n */\npublic static boolean isClsRunning(Context context, String pkg, String cls) {\n    ActivityManager am = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);\n    List&lt;ActivityManager.RunningTaskInfo&gt; tasks = am.getRunningTasks(1);\n    ActivityManager.RunningTaskInfo task = tasks.get(0);\n    if (task != null) {\n        return TextUtils.equals(task.topActivity.getPackageName(), pkg) &amp;&amp;\n                TextUtils.equals(task.topActivity.getClassName(), cls);\n    }\n    return false;\n}</code></pre><hr>\n<p>整合后的判断方法。</p>\n<pre><code>/**\n * 判断一个应用是否在后台存活\n *\n * @param pkg  pkg为应用包名\n * @param cls  cls为类名eg\n * @param context\n * @return\n */\npublic static boolean isAlive(String  paclageName, Context context){\n    int uid = getPackageUid(context, paclageName);\n    boolean rstA = isAppRunning(context, paclageName);\n    //判断Activity是否存活\n    boolean restC = isClsRunning(context, paclageName,&quot;Acitvity包路径&quot;);\n    if(rstA|| restC){\n       return true;\n    }else{\n        //指定包名的程序未在运行中\n        return false;\n    }\n}</code></pre>","categories":[],"tags":[{"name":"Android","slug":"Android","count":1,"path":"api/tags/Android.json"}]}